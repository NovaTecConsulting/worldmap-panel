{"version":3,"sources":["../src/map_renderer.js"],"names":["link","scope","elem","attrs","ctrl","events","on","render","renderingCompleted","data","panel","locationData","dataFormatter","setApValues","mapContainer","find","id","indexOf","map","WorldMap","resize","mapCenterMoved","panToMapCenter","legend","showLegend","createLegend","drawCircles"],"mappings":";;;;;;AAIe,WAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACrDA,SAAKC,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7BC;AACAH,WAAKI,kBAAL;AACD,KAHD;;AAKA,aAASD,MAAT,GAAkB;AAChB,UAAI,CAACH,KAAKK,IAAV,EAAgB;;AAEhB,UAAIL,KAAKM,KAAL,CAAWC,YAAX,KAA4B,eAAhC,EAAiD;AAC/CP,aAAKQ,aAAL,CAAmBC,WAAnB,CAA+BT,KAAKK,IAApC;AACD;;AAED,UAAMK,eAAeZ,KAAKa,IAAL,CAAU,eAAV,CAArB;;AAEA,UAAID,aAAa,CAAb,EAAgBE,EAAhB,CAAmBC,OAAnB,CAA2B,IAA3B,IAAmC,CAAC,CAAxC,EAA2C;AACzC;AACD;;AAED,UAAI,CAACb,KAAKc,GAAV,EAAe;AACbd,aAAKc,GAAL,GAAW,IAAIC,QAAJ,CAAaf,IAAb,EAAmBU,aAAa,CAAb,CAAnB,CAAX;AACD;;AAEDV,WAAKc,GAAL,CAASE,MAAT;;AAEA,UAAIhB,KAAKiB,cAAT,EAAyBjB,KAAKc,GAAL,CAASI,cAAT;;AAEzB,UAAI,CAAClB,KAAKc,GAAL,CAASK,MAAV,IAAoBnB,KAAKM,KAAL,CAAWc,UAAnC,EAA+CpB,KAAKc,GAAL,CAASO,YAAT;;AAE/CrB,WAAKc,GAAL,CAASQ,WAAT;AACD;AACF;;qBA/BuB1B,I;;;;AAFjBmB,c","file":"map_renderer.js","sourcesContent":["import './css/leaflet.css!';\nimport './css/ap.css!';\nimport WorldMap from './worldmap';\n\nexport default function link(scope, elem, attrs, ctrl) {\n  ctrl.events.on('render', () => {\n    render();\n    ctrl.renderingCompleted();\n  });\n\n  function render() {\n    if (!ctrl.data) return;\n\n    if (ctrl.panel.locationData === 'json endpoint') {\n      ctrl.dataFormatter.setApValues(ctrl.data);\n    }\n\n    const mapContainer = elem.find('.mapcontainer');\n\n    if (mapContainer[0].id.indexOf('{{') > -1) {\n      return;\n    }\n\n    if (!ctrl.map) {\n      ctrl.map = new WorldMap(ctrl, mapContainer[0]);\n    }\n\n    ctrl.map.resize();\n\n    if (ctrl.mapCenterMoved) ctrl.map.panToMapCenter();\n\n    if (!ctrl.map.legend && ctrl.panel.showLegend) ctrl.map.createLegend();\n\n    ctrl.map.drawCircles();\n  }\n}\n"]}